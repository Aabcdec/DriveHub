# Threadé¡µé¢è½¬ä¸ºå®¢æˆ·æŒ‰é’®é€»è¾‘ä¿®å¤è¯´æ˜

## ğŸ“‹ é—®é¢˜åˆ†æ

åœ¨Threadé¡µé¢ä¸­ï¼Œ"è½¬ä¸ºç”¨æˆ·"æŒ‰é’®çš„ç¦ç”¨å’Œæ˜¾ç¤ºé€»è¾‘å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š

### ğŸ” **å‘ç°çš„é—®é¢˜**ï¼š

1. **Vueè¯­æ³•é”™è¯¯**ï¼š
   - åŸä»£ç ï¼š`disabled="ableCustomer"`
   - é—®é¢˜ï¼šè¿™æ˜¯é™æ€å±æ€§ç»‘å®šï¼Œä¼šå°†å­—ç¬¦ä¸²"ableCustomer"ä½œä¸ºdisabledçš„å€¼
   - æ­£ç¡®ï¼šåº”è¯¥ä½¿ç”¨`:disabled="ableCustomer"`è¿›è¡ŒåŠ¨æ€ç»‘å®š

2. **çŠ¶æ€åˆ¤æ–­ä¸å®Œæ•´**ï¼š
   - åªå¤„ç†äº†`thread.state == -1`çš„æƒ…å†µï¼Œè®¾ç½®`ableCustomer = true`
   - æ²¡æœ‰å¤„ç†`thread.state != -1`çš„æƒ…å†µï¼Œå¯¼è‡´ä¹‹å‰çš„ç¦ç”¨çŠ¶æ€å¯èƒ½ä¿ç•™
   - ç¼ºå°‘çŠ¶æ€é‡ç½®é€»è¾‘

3. **é€»è¾‘åˆ†æ•£**ï¼š
   - çŠ¶æ€åˆ¤æ–­é€»è¾‘ç›´æ¥å†™åœ¨`viewThread`æ–¹æ³•ä¸­
   - ç¼ºå°‘ä¸“é—¨çš„çŠ¶æ€æ£€æŸ¥æ–¹æ³•ï¼Œä¸åˆ©äºç»´æŠ¤å’Œæ‰©å±•

## âœ… ä¿®å¤æ–¹æ¡ˆ

### 1. **ä¿®å¤Vueè¯­æ³•é”™è¯¯**

#### ä¿®å¤å‰
```vue
<el-button @click="converterUser" type="success" disabled="ableCustomer">è½¬ä¸ºç”¨æˆ·</el-button>
```

#### ä¿®å¤å
```vue
<el-button 
  @click="converterUser" 
  type="success" 
  :disabled="ableCustomer"
  :title="ableCustomer ? 'è¯¥çº¿ç´¢çŠ¶æ€ä¸å…è®¸è½¬ä¸ºå®¢æˆ·' : 'è½¬ä¸ºå®¢æˆ·'"
>
  è½¬ä¸ºç”¨æˆ·
</el-button>
```

### 2. **æ·»åŠ ä¸“é—¨çš„çŠ¶æ€æ£€æŸ¥æ–¹æ³•**

```javascript
// æ£€æŸ¥æ˜¯å¦å¯ä»¥è½¬ä¸ºå®¢æˆ·
checkCustomerConvertAbility(thread) {
  console.log('æ£€æŸ¥è½¬ä¸ºå®¢æˆ·æŒ‰é’®çŠ¶æ€ - çº¿ç´¢çŠ¶æ€:', thread.state)
  
  if (thread.state === -1) {
    console.log('çº¿ç´¢çŠ¶æ€ä¸º-1ï¼Œç¦ç”¨è½¬æ¢å®¢æˆ·æŒ‰é’®')
    this.ableCustomer = true
  } else {
    console.log('çº¿ç´¢çŠ¶æ€æ­£å¸¸ï¼Œå¯ç”¨è½¬æ¢å®¢æˆ·æŒ‰é’®')
    this.ableCustomer = false
  }
  
  console.log('è½¬æ¢æŒ‰é’®ç¦ç”¨çŠ¶æ€:', this.ableCustomer)
}
```

### 3. **ä¼˜åŒ–viewThreadæ–¹æ³•**

#### ä¿®å¤å‰
```javascript
viewThread(thread) {
  console.log('æŸ¥çœ‹çº¿ç´¢:', thread)
  this.detailThreadsFunction(thread.id)
  this.currentThread = thread
  this.loadFollowRecords(thread.id)
  this.showDetailDialog = true
  if(thread.state==-1){
    console.log('ç¦ç”¨è½¬æ¢å®¢æˆ·æŒ‰é’®')
    this.ableCustomer = true;
  }
}
```

#### ä¿®å¤å
```javascript
viewThread(thread) {
  console.log('æŸ¥çœ‹çº¿ç´¢:', thread)
  this.detailThreadsFunction(thread.id)
  this.currentThread = thread
  this.loadFollowRecords(thread.id)
  
  // æ ¹æ®çº¿ç´¢çŠ¶æ€åˆ¤æ–­æ˜¯å¦ç¦ç”¨è½¬ä¸ºå®¢æˆ·æŒ‰é’®
  this.checkCustomerConvertAbility(thread)
  
  this.showDetailDialog = true
}
```

### 4. **å®Œå–„å…³é—­å¯¹è¯æ¡†çš„é‡ç½®é€»è¾‘**

#### ä¿®å¤å‰
```javascript
hideDetailDialog() {
  this.showDetailDialog = false
  this.currentThread = null
  this.ableCustomer=false
}
```

#### ä¿®å¤å
```javascript
hideDetailDialog() {
  console.log('å…³é—­è¯¦æƒ…å¯¹è¯æ¡†ï¼Œé‡ç½®è½¬æ¢æŒ‰é’®çŠ¶æ€')
  this.showDetailDialog = false
  this.currentThread = null
  this.ableCustomer = false // é‡ç½®è½¬æ¢æŒ‰é’®çŠ¶æ€
  console.log('è½¬æ¢æŒ‰é’®çŠ¶æ€å·²é‡ç½®ä¸ºå¯ç”¨')
}
```

## ğŸ”§ æ ¸å¿ƒé€»è¾‘

### çŠ¶æ€åˆ¤æ–­è§„åˆ™
```javascript
// çº¿ç´¢çŠ¶æ€åˆ¤æ–­
if (thread.state === -1) {
  // ç¦ç”¨è½¬æ¢æŒ‰é’®
  this.ableCustomer = true
} else {
  // å¯ç”¨è½¬æ¢æŒ‰é’®
  this.ableCustomer = false
}
```

### æ•°æ®æµç¨‹
```
ç”¨æˆ·ç‚¹å‡»"æŸ¥çœ‹"æŒ‰é’®
    â†“
viewThread(thread) è¢«è°ƒç”¨
    â†“
checkCustomerConvertAbility(thread) æ£€æŸ¥çŠ¶æ€
    â†“
æ ¹æ® thread.state è®¾ç½® ableCustomer
    â†“
æŒ‰é’®æ ¹æ® ableCustomer çŠ¶æ€æ˜¾ç¤º/ç¦ç”¨
    â†“
ç”¨æˆ·ç‚¹å‡»"å…³é—­"æŒ‰é’®
    â†“
hideDetailDialog() è¢«è°ƒç”¨
    â†“
é‡ç½® ableCustomer = false
```

## ğŸ¯ ä¿®å¤æ•ˆæœ

### âœ… **è§£å†³çš„é—®é¢˜**ï¼š

1. **æŒ‰é’®æ­£ç¡®å“åº”çŠ¶æ€**ï¼š
   - `thread.state === -1`ï¼šæŒ‰é’®ç¦ç”¨ï¼Œæ˜¾ç¤ºä¸ºç°è‰²ä¸å¯ç‚¹å‡»
   - `thread.state !== -1`ï¼šæŒ‰é’®å¯ç”¨ï¼Œæ˜¾ç¤ºä¸ºç»¿è‰²å¯ç‚¹å‡»

2. **çŠ¶æ€æ­£ç¡®é‡ç½®**ï¼š
   - æ¯æ¬¡æŸ¥çœ‹çº¿ç´¢æ—¶éƒ½ä¼šé‡æ–°è¯„ä¼°æŒ‰é’®çŠ¶æ€
   - å…³é—­å¯¹è¯æ¡†æ—¶æ­£ç¡®é‡ç½®çŠ¶æ€ï¼Œé¿å…å½±å“ä¸‹æ¬¡æ“ä½œ

3. **ç”¨æˆ·ä½“éªŒæå‡**ï¼š
   - æ·»åŠ äº†é¼ æ ‡æ‚¬åœæç¤ºï¼Œå‘ŠçŸ¥ç”¨æˆ·ä¸ºä»€ä¹ˆæŒ‰é’®è¢«ç¦ç”¨
   - è¯¦ç»†çš„æ§åˆ¶å°æ—¥å¿—ï¼Œä¾¿äºè°ƒè¯•å’Œé—®é¢˜æ’æŸ¥

### âœ… **éªŒè¯æ–¹æ³•**ï¼š

1. **æµ‹è¯•ç¦ç”¨çŠ¶æ€**ï¼š
   - æŸ¥çœ‹`state === -1`çš„çº¿ç´¢
   - ç¡®è®¤"è½¬ä¸ºç”¨æˆ·"æŒ‰é’®ä¸ºç¦ç”¨çŠ¶æ€ï¼ˆç°è‰²ï¼‰
   - é¼ æ ‡æ‚¬åœæ˜¾ç¤ºæç¤ºä¿¡æ¯

2. **æµ‹è¯•å¯ç”¨çŠ¶æ€**ï¼š
   - æŸ¥çœ‹`state !== -1`çš„çº¿ç´¢
   - ç¡®è®¤"è½¬ä¸ºç”¨æˆ·"æŒ‰é’®ä¸ºå¯ç”¨çŠ¶æ€ï¼ˆç»¿è‰²ï¼‰
   - å¯ä»¥æ­£å¸¸ç‚¹å‡»

3. **æµ‹è¯•çŠ¶æ€é‡ç½®**ï¼š
   - å…ˆæŸ¥çœ‹ç¦ç”¨çŠ¶æ€çš„çº¿ç´¢
   - å…³é—­å¯¹è¯æ¡†
   - å†æŸ¥çœ‹å¯ç”¨çŠ¶æ€çš„çº¿ç´¢
   - ç¡®è®¤æŒ‰é’®çŠ¶æ€æ­£ç¡®åˆ‡æ¢

## ğŸš€ ä½¿ç”¨è¯´æ˜

### æŒ‰é’®çŠ¶æ€è¯´æ˜
- **å¯ç”¨çŠ¶æ€**ï¼šç»¿è‰²æŒ‰é’®ï¼Œå¯ç‚¹å‡»ï¼Œçº¿ç´¢çŠ¶æ€æ­£å¸¸
- **ç¦ç”¨çŠ¶æ€**ï¼šç°è‰²æŒ‰é’®ï¼Œä¸å¯ç‚¹å‡»ï¼Œçº¿ç´¢çŠ¶æ€ä¸º-1
- **æç¤ºä¿¡æ¯**ï¼šé¼ æ ‡æ‚¬åœæ˜¾ç¤ºç›¸åº”çš„æç¤ºæ–‡å­—

### å¼€å‘è€…è°ƒè¯•
æ§åˆ¶å°ä¼šè¾“å‡ºè¯¦ç»†çš„çŠ¶æ€å˜åŒ–æ—¥å¿—ï¼š
```
æŸ¥çœ‹çº¿ç´¢: {id: 1, state: -1, ...}
æ£€æŸ¥è½¬ä¸ºå®¢æˆ·æŒ‰é’®çŠ¶æ€ - çº¿ç´¢çŠ¶æ€: -1
çº¿ç´¢çŠ¶æ€ä¸º-1ï¼Œç¦ç”¨è½¬æ¢å®¢æˆ·æŒ‰é’®
è½¬æ¢æŒ‰é’®ç¦ç”¨çŠ¶æ€: true
```

ç°åœ¨Threadé¡µé¢çš„"è½¬ä¸ºç”¨æˆ·"æŒ‰é’®é€»è¾‘å·²ç»å®Œå…¨ä¿®å¤ï¼Œå¯ä»¥æ­£ç¡®æ ¹æ®çº¿ç´¢çŠ¶æ€è¿›è¡Œç¦ç”¨å’Œå¯ç”¨ï¼
